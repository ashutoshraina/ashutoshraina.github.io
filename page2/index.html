<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <meta http-equiv="last-modified" content="2014-05-03T14:06:52.5287702+05:30" />
    <title>Ashutosh Raina</title>
    <link rel="stylesheet" type="text/css" href="/stylesheets/style.css" />
    <link rel="shortcut icon" href="/stylesheets/images/me.png" type="image/png">
    <link rel="shortcut icon" type="image/png" href="/stylesheets/images/me.png" />
	<link rel="stylesheet" type="text/css" href="/stylesheets/font-awesome/css/font-awesome.min.css" />
    <link rel="canonical" href="http://ashutoshraina.github.io/page2/" />
</head>
<body class="home blog">
    <div id="page" class="hfeed site">
        <header id="masthead" class="site-header fancy-container lightgreen" role="banner">
            <hgroup>
                <h1 class="site-title"><a href="/" title="ashutoshraina.github.io" rel="home">Ashutosh Raina</a></h1>
                <h2 class="site-title"><small>For those who are still chasing</small></h2>
                <p class="site-description">I love french fries!!</p>
            </hgroup>
            <nav role="navigation" class="site-navigation main-navigation">
                <h1 class="assistive-text">Menu</h1>
                <div class="assistive-text skip-link"><a href="#content" title="Skip to content">Skip to    content</a>
                </div>
                <div class="menu">
                    <ul>
						<li><a href="/" class="home"><i class="fa fa-home"></i></a></li>
                        <li><a href="/about">About</a></li>
                        <li><a href="/category">Categories</a></li>
                        <li><a href="/archive">Archive</a></li>
                        <li><a href="/feed.xml">RSS/Atom</a></li>
                    </ul>
                </div>
            </nav>
        </header>

        <div id="main">

            <div id="primary" class="site-content">
                <div id="content" role="main">
                  

  <ul class="posts">
    <li class="post">
      <h1><a href="/2014/01/mvc-on-mono-monodevelop/">Up and Running with Asp.net MVC Mono and Monodevelop</a></h1> 
      <div class="meta">
        <p class="posted">03 Jan 2014</p>
        <ul class="categories">
          <li><a href="/category/monodevelop" title="monodevelop">monodevelop</a></li>
          <li><a href="/category/mono" title="mono">mono</a></li>
          <li><a href="/category/opensource" title="opensource">opensource</a></li>
          <li><a href="/category/asp.net mvc" title="asp.net mvc">asp.net mvc</a></li>
          <li><a href="/category/tips" title="tips">tips</a></li>
        </ul>
      </div>
      
      <p>After 3 hours worth of work, I was finally able to run Asp.net MVC4 using monodevelop on mono. I will talk about installaing monodevelop later (that was a painful exercise). So, assuming you have monodevelop installed on windows and latest version of mono installed (mono-3.2.3)as well. Now, go file new solution Asp.net MVC project with razor. Run it and wait for the world to fall apart.</p>


      <p><a href="/2014/01/mvc-on-mono-monodevelop/">Read more...</a></p>
    </li>
    <hr/>
    <li class="post">
      <h1><a href="/2013/12/tasks-with-timeout-net4.5-contd/">Tasks With Timeout On .net 4.5 Contd.</a></h1> 
      <div class="meta">
        <p class="posted">30 Dec 2013</p>
        <ul class="categories">
          <li><a href="/category/.net" title=".net">.net</a></li>
          <li><a href="/category/CSharp" title="CSharp">CSharp</a></li>
          <li><a href="/category/Asynchrony" title="Asynchrony">Asynchrony</a></li>
        </ul>
      </div>
      <ul class="snow-series"><li><a href="/2013/12/tasks-with-timeouts/">Part 1 - Tasks With Timeouts</a></li><li><a href="/2013/12/tasks-with-timeout-contd/">Part 2 - Tasks With Timeouts contd.</a></li><li>Part 3 - Tasks With Timeout on .net4.5</li></ul>
      <p>The previous two posts looked at creating tasks with timeouts on .net4. The code as expected took some heavy lifting to get going. Understanding the extension methods themselves took some time. Today, using .net 4.5 this can be made a lot easier. Can we do better ? Yes we can !!</p>

<pre><code>    public static Task WithTimeout(this Task task, TimeSpan timeout)
    {
        var delay = task.ContinueWith(t =&gt; { }, new CancellationTokenSource(timeout).Token);
        return Task.WhenAny(task, delay).Unwrap();
    }
    public static Task&lt;T&gt; WithTimeout&lt;T&gt;(this Task&lt;T&gt; task, TimeSpan timeout)
    {            
        var delay = task.ContinueWith(t =&gt; t.Result, new CancellationTokenSource(timeout).Token);
        return Task.WhenAny(task, delay).Unwrap();
    }
</code></pre>

<p>
      <p><a href="/2013/12/tasks-with-timeout-net4.5-contd/">Read more...</a></p>
    </li>
    <hr/>
    <li class="post">
      <h1><a href="/2013/12/tasks-with-timeout-contd/">Tasks With Timeout Contd.</a></h1> 
      <div class="meta">
        <p class="posted">24 Dec 2013</p>
        <ul class="categories">
          <li><a href="/category/.net" title=".net">.net</a></li>
          <li><a href="/category/CSharp" title="CSharp">CSharp</a></li>
          <li><a href="/category/Asynchrony" title="Asynchrony">Asynchrony</a></li>
        </ul>
      </div>
      <ul class="snow-series"><li><a href="/2013/12/tasks-with-timeouts/">Part 1 - Tasks With Timeouts</a></li><li>Part 2 - Tasks With Timeouts contd.</li><li><a href="/2013/12/tasks-with-timeout-net4.5-contd/">Part 3 - Tasks With Timeout on .net4.5</a></li></ul>
      <p>As mentioned in the last post we can now have tasks with individual timeouts. The code looked a little heavy. Can we do better ? Yes we can !!</p>

<pre><code>    var tasks = new List&lt;Task&gt;();
    try
    {
    //instead of checking for fault within the continutaion, 
    //we can just use a TaskContinuationOption to tell communicate the right semantics

    var t1 = Task.Factory.StartNew(_ =&gt; LongRunningTask(),TaskCreationOptions.AttachedToParent)
    .TimeoutAfter(1000)
    .ContinueWith(t =&gt; SomethingUsefulWithTheResult(), 
     TaskContinuationOptions.NotOnFaulted);

    var t2 = Task.Factory.StartNew(_ =&gt; LongRunningTask(), TaskCreationOptions.AttachedToParent)
      .ContinueWith(t =&gt; SomethingUsefulWithTheResult());

    var t3 = Task.Factory.StartNew(_ =&gt; LongRunningTask("Entering task3"),
    TaskCreationOptions.AttachedToParent)
      .ContinueWith(t =&gt; SomethingUsefulWithTheResult());

    tasks.Add(t1);
    tasks.Add(t2);
    tasks.Add(t3);

    Task.WaitAll(tasks.ToArray());
    }
    catch (Exception ex)
    {
    Console.WriteLine("There was an exception");
    Console.WriteLine(ex.InnerException.Message);   
    }
</code></pre>

<p>I will show in the next post how this wasn't all that better since this leaves a few gaps.</p>

      <p><a href="/2013/12/tasks-with-timeout-contd/">Read more...</a></p>
    </li>
    <hr/>
    <li class="post">
      <h1><a href="/2013/12/tasks-with-timeouts/">Tasks With Timeout</a></h1> 
      <div class="meta">
        <p class="posted">23 Dec 2013</p>
        <ul class="categories">
          <li><a href="/category/.net" title=".net">.net</a></li>
          <li><a href="/category/CSharp" title="CSharp">CSharp</a></li>
          <li><a href="/category/Asynchrony" title="Asynchrony">Asynchrony</a></li>
        </ul>
      </div>
      <ul class="snow-series"><li>Part 1 - Tasks With Timeouts</li><li><a href="/2013/12/tasks-with-timeout-contd/">Part 2 - Tasks With Timeouts contd.</a></li><li><a href="/2013/12/tasks-with-timeout-net4.5-contd/">Part 3 - Tasks With Timeout on .net4.5</a></li></ul>
      <p>So the task is to timeout a task. now, I never thought it would take me as long as it did. Turns out it is a really tricky problem problem. I was expecting something within the framework to make life easier, there isn't anything by default but msdn to the rescue 
<a href="http://blogs.msdn.com/b/pfxteam/archive/2011/11/10/10235834.aspx" title="Tasks With Timeout">Tasks With Timeouts</a></p>


      <p><a href="/2013/12/tasks-with-timeouts/">Read more...</a></p>
    </li>
    <hr/>
    <li class="post">
      <h1><a href="/2013/11/mongodb-sharding/">MongoDB-Sharding</a></h1> 
      <div class="meta">
        <p class="posted">05 Nov 2013</p>
        <ul class="categories">
          <li><a href="/category/.net" title=".net">.net</a></li>
          <li><a href="/category/CSharp" title="CSharp">CSharp</a></li>
          <li><a href="/category/mongodb" title="mongodb">mongodb</a></li>
          <li><a href="/category/opensource" title="opensource">opensource</a></li>
        </ul>
      </div>
      <ul class="snow-series"><li><a href="/2013/10/mongodb-ops-stuff/">Part 1 - Ops Stuff</a></li><li><a href="/2013/10/mongodb-indexing/">Part 2 - Indexing</a></li><li><a href="/2013/10/mongodb-understanding-your-queries-through-explainplan/">Part 3 - Explain Plan</a></li><li><a href="/2013/11/mongodb-replication/">Part 4 - Replication</a></li><li>Part 5 - Sharding</li></ul>
      <p><strong>Sharding</strong></p>

<p>Mongodb sharding is based on shard key.</p>

<p>K1 -&gt; k2 on shard1
K2 -&gt; k3 on shard2 etc..</p>

<p>Each shard is then replicated for higher availability and DR etc..Sharding is therefore range based. Sharding is done per collections basis.Range based sharding helps it do range based queries.</p>


      <p><a href="/2013/11/mongodb-sharding/">Read more...</a></p>
    </li>
    <hr/>
  </ul> 

  <!-- Pagination links -->
  <div id="post-pagination" class="pagination">

   
      <p class="previous">
        <a href="/">Previous Page</a>
      </p>


    <p class="previous">
      <a href="/page3">Next Page</a>
    </p>

  </div>


                </div>
                <!-- #content -->
            </div>
            <!-- #primary .site-content -->      
        <!-- #main -->

        <footer id="colophon" class="site-footer" role="contentinfo">
            <div class="site-info">
                Powered by <a href="https://github.com/Sandra/Sandra.Snow" rel="generator">Sandra.Snow</a>.	
            </div>
            <!-- .site-info -->
        </footer>
        <!-- #colophon .site-footer -->
    </div>
    <!-- #page .hfeed .site -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script src='/javascripts/prettify.js' type='text/javascript'></script>
    
    <script type="text/javascript">
var _gaq = _gaq || [];

_gaq.push(['_setAccount', 'UA-46699881-1']);
_gaq.push(['_trackPageview']);
        
(function () {
    var ga = document.createElement('script');
    ga.type = 'text/javascript';
    ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(ga, s);
})();
</script>
    
    <script type='text/javascript'>
      $(function () {
        $("pre code").parent().each(function () {
          if (!$(this).hasClass("prettyprint")) {
            $(this).addClass("prettyprint");
            a = true
          }
        });

        prettyPrint();
      });
    </script>
</body>
</html>
