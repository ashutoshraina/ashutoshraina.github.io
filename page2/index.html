<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <meta http-equiv="last-modified" content="2016-09-27T23:20:59.9553296-07:00" />
    <title>Ashutosh Raina</title>
    <link rel="stylesheet" type="text/css" href="/stylesheets/style.css" />
    <link rel="shortcut icon" href="/stylesheets/images/me.png" type="image/png">
    <link rel="shortcut icon" type="image/png" href="/stylesheets/images/me.png" />
	<link rel="stylesheet" type="text/css" href="/stylesheets/font-awesome/css/font-awesome.min.css" />
    <link rel="canonical" href="http://ashutoshraina.github.io/page2/" />
</head>
<body class="home blog">
    <div id="page" class="hfeed site">
        <header id="masthead" class="site-header fancy-container lightgreen" role="banner">
            <hgroup>
                <h1 class="site-title"><a href="/" title="ashutoshraina.github.io" rel="home">Ashutosh Raina</a></h1>
                <h2 class="site-title"><small>For those who are still chasing</small></h2>
                <p class="site-description">I love french fries!!</p>
            </hgroup>
            <nav role="navigation" class="site-navigation main-navigation">
                <h1 class="assistive-text">Menu</h1>
                <div class="assistive-text skip-link"><a href="#content" title="Skip to content">Skip to    content</a>
                </div>
                <div class="menu">
                    <ul>
						<li><a href="/" class="home"><i class="fa fa-home"></i></a></li>
                        <li><a href="/archive">Archive</a></li>
                        <li><a href="/category">Categories</a></li>                        
                        <li><a href="/about">About</a></li>
                        <li><a href="/feed.xml">RSS/Atom</a></li>
                    </ul>
                </div>
            </nav>
        </header>

        <div id="main">

            <div id="primary" class="site-content">
                <div id="content" role="main">
                  

  <ul class="posts">
    <li class="post">
      <h1><a href="/2014/02/learning-chrome-extensions-by-accident/">Learning Chrome Extensions by accident</a></h1> 
      <div class="meta">
        <p class="posted">05 Feb 2014</p>
        <ul class="categories">
          <li><a href="/category/accident" title="accident">accident</a></li>
          <li><a href="/category/chrome" title="chrome">chrome</a></li>
        </ul>
      </div>
      
      <p>So, twitter has revamped their look to be flatter and what not...It looks like apple now. This really means I was annoyed and wanted to get rid of things in the interface I did not like. Ok so how do we do that ? Write a chrome extension and that will be the permanent end of that!!</p>


      <p><a href="/2014/02/learning-chrome-extensions-by-accident/">Read more...</a></p>
    </li>
    <hr/>
    <li class="post">
      <h1><a href="/2014/01/learning-redis-by-accident/">Learning Redis by accident</a></h1> 
      <div class="meta">
        <p class="posted">27 Jan 2014</p>
        <ul class="categories">
          <li><a href="/category/.net" title=".net">.net</a></li>
          <li><a href="/category/csharp" title="csharp">csharp</a></li>
          <li><a href="/category/redis" title="redis">redis</a></li>
          <li><a href="/category/opensource" title="opensource">opensource</a></li>
          <li><a href="/category/accident" title="accident">accident</a></li>
        </ul>
      </div>
      
      <p>While exploring the pub-sub mechanism in MongoDB, I came across Redis. Redis has this built in. This gave me the incentive to scratch a long time itch and try redis. Redis is eseentially an in-memory database. It is supposed to be fast (like really fast). So, I thought I would take it for a spin. Considering, I am on windows and it seems like there is no direct support for windows. Windows remains the poor second, but we will let it be for now.
Microsoft provides the executable for 2.6 and we can download it from there.</p>


      <p><a href="/2014/01/learning-redis-by-accident/">Read more...</a></p>
    </li>
    <hr/>
    <li class="post">
      <h1><a href="/2014/01/mongodb-pubsub/">Pub Sub with MongoDB</a></h1> 
      <div class="meta">
        <p class="posted">23 Jan 2014</p>
        <ul class="categories">
          <li><a href="/category/.net" title=".net">.net</a></li>
          <li><a href="/category/csharp" title="csharp">csharp</a></li>
          <li><a href="/category/mongodb" title="mongodb">mongodb</a></li>
          <li><a href="/category/opensource" title="opensource">opensource</a></li>
        </ul>
      </div>
      
      <p>In the spirit of trying out new thigns I wanted to create a pub0sub system with mongodb. Usually we would create a pub sub system with a message queue, but since we are a little crazy we will try and do it this way. Turns out it is quite simple. Before we begin we must understand somethings that are available uniquely in MongoDB.

      <p><a href="/2014/01/mongodb-pubsub/">Read more...</a></p>
    </li>
    <hr/>
    <li class="post">
      <h1><a href="/2014/01/optimistic-concurrency-mongodb/">MongoDb: Optimistic Concurrency</a></h1> 
      <div class="meta">
        <p class="posted">18 Jan 2014</p>
        <ul class="categories">
          <li><a href="/category/.net" title=".net">.net</a></li>
          <li><a href="/category/csharp" title="csharp">csharp</a></li>
          <li><a href="/category/mongodb" title="mongodb">mongodb</a></li>
          <li><a href="/category/opensource" title="opensource">opensource</a></li>
        </ul>
      </div>
      
      <p>Optimistic concurrency is one something that most of us need in our applications. What follows is a simple example on how to achieve it in MongoDB.
First, a really simple document.</p>

<p>Note : This post uses a lot of code that I have shown in previous posts, please look at them if there is any confusion. The principles remain simple and can be used without using the code shown below.</p>


      <p><a href="/2014/01/optimistic-concurrency-mongodb/">Read more...</a></p>
    </li>
    <hr/>
    <li class="post">
      <h1><a href="/2014/01/querying-oplog-mongodb/">MongoDb: Querying the OpLog</a></h1> 
      <div class="meta">
        <p class="posted">10 Jan 2014</p>
        <ul class="categories">
          <li><a href="/category/.net" title=".net">.net</a></li>
          <li><a href="/category/csharp" title="csharp">csharp</a></li>
          <li><a href="/category/mongodb" title="mongodb">mongodb</a></li>
          <li><a href="/category/opensource" title="opensource">opensource</a></li>
        </ul>
      </div>
      
      <p>Back to MongoDB after some time. OpLog has always been a curious case for me. To know more about it let's start to our detective work.</p>

<p><strong>What is the OpLog?</strong></p>

<p>The mongodb website gives a rather long definition. I will quote that </p>

<blockquote>
  <p>The oplog (operations log) is a special capped collection that keeps a rolling record of all operations that modify the data stored in your databases. MongoDB applies database operations on the primary and then records the operations on the primaryâ€™s oplog. The secondary members then copy and apply these operations in an asynchronous process. All replica set members contain a copy of the oplog, allowing them to maintain the current state of the database.</p>
  
  <p>To facilitate replication, all replica set members send heartbeats (pings) to all other members. Any member can import oplog entries from any other member.
  Whether applied once or multiple times to the target dataset, each operation in the oplog produces the same results, i.e. each operation in the oplog is idempotent. For proper replication operations, entries in the oplog must be idempotent:</p>
</blockquote>

<ul>
<li>initial sync</li>
<li>post-rollback catch-up</li>
<li>sharding chunk migrations</li>
</ul>

<p>
      <p><a href="/2014/01/querying-oplog-mongodb/">Read more...</a></p>
    </li>
    <hr/>
    <li class="post">
      <h1><a href="/2014/01/mvc-on-mono-monodevelop/">Up and Running with Asp.net MVC Mono and Monodevelop</a></h1> 
      <div class="meta">
        <p class="posted">03 Jan 2014</p>
        <ul class="categories">
          <li><a href="/category/monodevelop" title="monodevelop">monodevelop</a></li>
          <li><a href="/category/mono" title="mono">mono</a></li>
          <li><a href="/category/opensource" title="opensource">opensource</a></li>
          <li><a href="/category/asp.net mvc" title="asp.net mvc">asp.net mvc</a></li>
          <li><a href="/category/tips" title="tips">tips</a></li>
        </ul>
      </div>
      
      <p>After 3 hours worth of work, I was finally able to run Asp.net MVC4 using monodevelop on mono. I will talk about installaing monodevelop later (that was a painful exercise). So, assuming you have monodevelop installed on windows and latest version of mono installed (mono-3.2.3)as well. Now, go file new solution Asp.net MVC project with razor. Run it and wait for the world to fall apart.</p>


      <p><a href="/2014/01/mvc-on-mono-monodevelop/">Read more...</a></p>
    </li>
    <hr/>
    <li class="post">
      <h1><a href="/2013/12/tasks-with-timeout-net4-5/">Tasks With Timeout On .net 4.5</a></h1> 
      <div class="meta">
        <p class="posted">30 Dec 2013</p>
        <ul class="categories">
          <li><a href="/category/.net" title=".net">.net</a></li>
          <li><a href="/category/csharp" title="csharp">csharp</a></li>
          <li><a href="/category/Asynchrony" title="Asynchrony">Asynchrony</a></li>
        </ul>
      </div>
      <ul class="snow-series"><li><a href="/2013/12/tasks-with-timeouts/">Part 1 - Tasks With Timeouts</a></li><li><a href="/2013/12/tasks-with-timeout-contd/">Part 2 - Tasks With Timeouts contd.</a></li><li>Part 3 - Tasks With Timeout on .net4.5</li></ul>
      <p>The previous two posts looked at creating tasks with timeouts on .net4. The code as expected took some heavy lifting to get going. Understanding the extension methods themselves took some time. Today, using .net 4.5 this can be made a lot easier. Can we do better ? Yes we can !!</p>

<pre><code>    public static Task WithTimeout(this Task task, TimeSpan timeout)
    {
        var delay = task.ContinueWith(t =&gt; { }, new CancellationTokenSource(timeout).Token);
        return Task.WhenAny(task, delay).Unwrap();
    }
    public static Task&lt;T&gt; WithTimeout&lt;T&gt;(this Task&lt;T&gt; task, TimeSpan timeout)
    {            
        var delay = task.ContinueWith(t =&gt; t.Result, new CancellationTokenSource(timeout).Token);
        return Task.WhenAny(task, delay).Unwrap();
    }
</code></pre>


      <p><a href="/2013/12/tasks-with-timeout-net4-5/">Read more...</a></p>
    </li>
    <hr/>
    <li class="post">
      <h1><a href="/2013/12/tasks-with-timeout-contd/">Tasks With Timeout Contd.</a></h1> 
      <div class="meta">
        <p class="posted">24 Dec 2013</p>
        <ul class="categories">
          <li><a href="/category/.net" title=".net">.net</a></li>
          <li><a href="/category/csharp" title="csharp">csharp</a></li>
          <li><a href="/category/Asynchrony" title="Asynchrony">Asynchrony</a></li>
        </ul>
      </div>
      <ul class="snow-series"><li><a href="/2013/12/tasks-with-timeouts/">Part 1 - Tasks With Timeouts</a></li><li>Part 2 - Tasks With Timeouts contd.</li><li><a href="/2013/12/tasks-with-timeout-net4-5/">Part 3 - Tasks With Timeout on .net4.5</a></li></ul>
      <p>As mentioned in the last post we can now have tasks with individual timeouts. The code looked a little heavy. Can we do better ? Yes we can !!</p>

<pre><code>    var tasks = new List&lt;Task&gt;();
    try
    {
    //instead of checking for fault within the continutaion, 
    //we can just use a TaskContinuationOption to tell communicate the right semantics

    var t1 = Task.Factory.StartNew(_ =&gt; LongRunningTask(),TaskCreationOptions.AttachedToParent)
    .TimeoutAfter(1000)
    .ContinueWith(t =&gt; SomethingUsefulWithTheResult(), 
     TaskContinuationOptions.NotOnFaulted);

    var t2 = Task.Factory.StartNew(_ =&gt; LongRunningTask(), TaskCreationOptions.AttachedToParent)
      .ContinueWith(t =&gt; SomethingUsefulWithTheResult());

    var t3 = Task.Factory.StartNew(_ =&gt; LongRunningTask("Entering task3"),
    TaskCreationOptions.AttachedToParent)
      .ContinueWith(t =&gt; SomethingUsefulWithTheResult());

    tasks.Add(t1);
    tasks.Add(t2);
    tasks.Add(t3);

    Task.WaitAll(tasks.ToArray());
    }
    catch (Exception ex)
    {
    Console.WriteLine("There was an exception");
    Console.WriteLine(ex.InnerException.Message);   
    }
</code></pre>

<p>I will show in the next post how this wasn't all that better since this leaves a few gaps.</p>

      <p><a href="/2013/12/tasks-with-timeout-contd/">Read more...</a></p>
    </li>
    <hr/>
    <li class="post">
      <h1><a href="/2013/12/tasks-with-timeouts/">Tasks With Timeout</a></h1> 
      <div class="meta">
        <p class="posted">23 Dec 2013</p>
        <ul class="categories">
          <li><a href="/category/.net" title=".net">.net</a></li>
          <li><a href="/category/csharp" title="csharp">csharp</a></li>
          <li><a href="/category/Asynchrony" title="Asynchrony">Asynchrony</a></li>
        </ul>
      </div>
      <ul class="snow-series"><li>Part 1 - Tasks With Timeouts</li><li><a href="/2013/12/tasks-with-timeout-contd/">Part 2 - Tasks With Timeouts contd.</a></li><li><a href="/2013/12/tasks-with-timeout-net4-5/">Part 3 - Tasks With Timeout on .net4.5</a></li></ul>
      <p>So the task is to timeout a task. now, I never thought it would take me as long as it did. Turns out it is a really tricky problem problem. I was expecting something within the framework to make life easier, there isn't anything by default but msdn to the rescue 
<a href="http://blogs.msdn.com/b/pfxteam/archive/2011/11/10/10235834.aspx" title="Tasks With Timeout">Tasks With Timeouts</a></p>


      <p><a href="/2013/12/tasks-with-timeouts/">Read more...</a></p>
    </li>
    <hr/>
    <li class="post">
      <h1><a href="/2013/11/mongodb-sharding/">MongoDB-Sharding</a></h1> 
      <div class="meta">
        <p class="posted">05 Nov 2013</p>
        <ul class="categories">
          <li><a href="/category/.net" title=".net">.net</a></li>
          <li><a href="/category/csharp" title="csharp">csharp</a></li>
          <li><a href="/category/mongodb" title="mongodb">mongodb</a></li>
          <li><a href="/category/opensource" title="opensource">opensource</a></li>
        </ul>
      </div>
      <ul class="snow-series"><li><a href="/2013/10/mongodb-ops-stuff/">Part 1 - Ops Stuff</a></li><li><a href="/2013/10/mongodb-indexing/">Part 2 - Indexing</a></li><li><a href="/2013/10/mongodb-understanding-your-queries-through-explainplan/">Part 3 - Explain Plan</a></li><li><a href="/2013/11/mongodb-replication/">Part 4 - Replication</a></li><li>Part 5 - Sharding</li></ul>
      <p><strong>Sharding</strong></p>

<p>Mongodb sharding is based on shard key.</p>

<p>K1 -&gt; k2 on shard1
K2 -&gt; k3 on shard2 etc..</p>

<p>Each shard is then replicated for higher availability and DR etc..Sharding is therefore range based. Sharding is done per collections basis.Range based sharding helps it do range based queries.</p>


      <p><a href="/2013/11/mongodb-sharding/">Read more...</a></p>
    </li>
    <hr/>
  </ul> 

  <!-- Pagination links -->
  <div id="post-pagination" class="pagination">

   
      <p class="previous">
        <a href="/">Previous Page</a>
      </p>


    <p class="previous">
      <a href="/page3">Next Page</a>
    </p>

  </div>


                </div>
                <!-- #content -->
            </div>
            <!-- #primary .site-content -->      
        <!-- #main -->

        <footer id="colophon" class="site-footer" role="contentinfo">
            <div class="site-info">
                Powered by <a href="https://github.com/Sandra/Sandra.Snow" rel="generator">Sandra.Snow</a>.	
            </div>
            <!-- .site-info -->
        </footer>
        <!-- #colophon .site-footer -->
    </div>
    <!-- #page .hfeed .site -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script src='/javascripts/prettify.js' type='text/javascript'></script>
    
    <script type="text/javascript">
var _gaq = _gaq || [];

_gaq.push(['_setAccount', 'UA-46699881-1']);
_gaq.push(['_trackPageview']);
        
(function () {
    var ga = document.createElement('script');
    ga.type = 'text/javascript';
    ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(ga, s);
})();
</script>
    
    <script type='text/javascript'>
      $(function () {
        $("pre code").parent().each(function () {
          if (!$(this).hasClass("prettyprint")) {
            $(this).addClass("prettyprint");
            a = true
          }
        });

        prettyPrint();
      });
    </script>
</body>
</html>
